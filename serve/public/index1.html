<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <title>js调用手机摄像头拍照</title>
  <style type="text/css">
  </style>
  <script>
    window.addEventListener("DOMContentLoaded", function () {
      var canvas = document.getElementById("canvas"),
        context = canvas.getContext("2d"),
        video = document.getElementById("video"),
        videoObj = { "video": true };
      navigator.mediaDevices.getUserMedia(videoObj)
        .then(function (stream) {
          currentStream = stream
          if (window.URL) {
            video.srcObject = stream;
            video.onloadedmetadata = function (e) {
              video.play();
            };
          } else {
            video.src = stream;
          }
          (() => {
            context.drawImage(video, 0, 0, 640, 480);
          }, 1000);
        })

        .catch(function (err) {
          console.log(err)
        });
      // document.getElementById("snap").addEventListener("click", function () {
      // context.drawImage(video, 0, 0, 640, 480);
      // });
    }, false);

  </script>
</head>

<body>
  <video id="video" width="640" height="480" autoplay></video>
  <button id="snap" style="font-size: 40px;">拍照</button>
  <canvas id="canvas" width="640" height="640"></canvas>
</body>

</html>